
LIBS = \
	L:Stubs.o.asstubs\
	MemCheck:o.MC\
	OSLib:o.oslib\
	L:tboxlibs.o.eventlib\
	L:AJWLib.o.AJWLib\
	L:Desk.o.Desk


INCLUDE	=	C:

#CCFLAGS		=	$(CCEXTRA) -throwback -strict -depend !Depend -g -I$(INCLUDE) -fah
CCFLAGS		=	$(CCEXTRA) -throwback -strict -Otime -depend !Depend -I$(INCLUDE) -fah
LINKFLAGS	=	$(LINKEXTRA) -d

#MEMCHECK	=MemCheck.cc
CC		=	$(MEMCHECK) cc -c $(CCFLAGS)
LINK		=	DrLink $(LINKFLAGS)

all: !RunImage Backup

!RunImage: GUI.o
	$(LINK) -o $@ GUI.o $(LIBS)

Backup: Main.o
	$(LINK) -o $@ Main.o $(LIBS)

.c.o:
	$(CC) $< -o $@


# Dynamic dependencies:
o.Main:	c.Main
o.Main:	MemCheck:h.MemCheck
o.Main:	OSLib:h.osgbpb
o.Main:	OSLib:h.types
o.Main:	OSLib:h.os
o.Main:	OSLib:h.fileswitch
o.Main:	OSLib:h.fileraction
o.Main:	OSLib:h.wimp
o.Main:	OSLib:h.osspriteop
o.Main:	OSLib:h.font
o.Main:	OSLib:h.wimp
o.Main:	OSLib:h.hourglass
o.GUI:	c.GUI
o.GUI:	C:tboxlibs.h.wimp
o.GUI:	C:tboxlibs.h.toolbox
o.GUI:	C:h.kernel
o.GUI:	C:tboxlibs.h.event
o.GUI:	C:tboxlibs.h.wimplib
